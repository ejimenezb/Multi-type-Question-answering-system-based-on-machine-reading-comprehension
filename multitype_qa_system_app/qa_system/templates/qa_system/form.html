<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-type question answering system</title>
    <style>
        table {
          font-family: arial, sans-serif;
          border-collapse: collapse;
          width: 100%;
        }
        
        td {
          border: 1px solid #000000;
          text-align: left;
          padding: 8px;
        }
        
        th {
            border: 1px solid #000000;
            text-align: center;
            padding: 8px;
            background-color: #91e9cd;
        }
    </style>
</head>
<body style="font-size: 16px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'; padding: 4rem 2rem; direction: ltr">
    <div>
        <h1>Multi-type question answering system</h1>
    </div>
    <form action="{% url 'qa_system:algorithm' %}" method="post">
        {% csrf_token %}
        <div>
        <ul>
            <div>
                <legend><h1>Medical Record:</h1></legend>
            </div>
            <div>
                {% if information_cache %}
                    <input type="text", name='textfield', value={{information_cache}}>
                {% endif %}
                {% if not information_cache %}
                    <input type="text", name='textfield' placeholder="Write medical report">
                {% endif %}
            </div>
            <div>
                <legend><h1>Question:</h1></legend>
            </div>
            <div>
                {% if question_cache %}
                    <input type="text", name='questionfield', value={{question_cache}}>
                {% endif %}
                {% if not question_cache %}
                    <input type="text", name='questionfield' placeholder="Write question">
                {% endif %} 
            </div>
            <br>
            {% comment %} <fieldset><input type="submit", value='Submit'></fieldset> {% endcomment %}
            <button type="submit">Submit</button>
            
            {% if error_message %}
                <p><strong>{{error_message}}</strong></p>
            {% endif %}             
            
            {% if answer %}
                <div>
                    <div>
                        <legend><h1>Context:</h1></legend>
                    </div> 
                    <div>
                        <figure style="margin-bottom: 1rem">
                            <div class="entities" style="line-height: 2.5; direction: ltr">                        
                                <p>
                                    {{contextp1}}
                                    <mark class="entity" style="background: #aa9cfc; padding: 0.45em 0.6em; margin: 0 0.25em; line-height: 1; border-radius: 0.35em;">
                                        <strong>{{answer}}</strong>
                                    </mark>
                                    {{contextp2}}
                                </p>
                            </div>
                        </figure>                            
                    </div>     
                    <div>
                        <legend><h1>Answer:</h1></legend>
                    </div>        
                    <div>
                        <strong>{{answer}}</strong>
                    </div>
                    <br>
                    <div>
                        <strong>Start: </strong>{{start_point}}
                    </div>
                    <br>
                    <div>
                        <strong>End: </strong>{{end_point}}
                    </div>                      
                    <br>                      
                    <div>
                        <strong>Score: </strong>{{score}}
                    </div>                    
                </div>    
                <div>
                    <div>
                        <legend><h1>Entities:</h1></legend>
                    </div>  
                    <div>
                        <div>
                            <strong>Modelo '{{model1_name}}': <a href="{% url 'qa_system:displacy1_view' %}" target="_blank" rel="noopener noreferrer">NER visualization</a>.</strong>
                            {% for entity in entities1 %}
                                <li><p>{{entity}}</p></li>                          
                            {% endfor %}  
                        </div>   
                        <div>
                            <strong>Modelo '{{model2_name}}': <a href="{% url 'qa_system:displacy2_view' %}" target="_blank" rel="noopener noreferrer">NER visualization</a>.</strong>
                                {% for entity in entities2 %}
                                    <li><p>{{entity}}</p></li>                          
                                {% endfor %}   
                        </div> 
                        <div>
                            <strong>Modelo '{{model3_name}}': <a href="{% url 'qa_system:displacy3_view' %}" target="_blank" rel="noopener noreferrer">NER visualization</a>.</strong>
                            {% for entity in entities3 %}
                                <li><p>{{entity}}</p></li>                          
                            {% endfor %}                 
                        </div>  
                    </div>
                </div>  
                
                <table class="default">

                    <tr>
                  
                      <th rowspan="2">Answer</th>
                  
                      <th colspan="3">NER models</th>
                  
                    </tr>
                  
                    <tr>
                  
                      <th><a href="{% url 'qa_system:displacy1_view' %}" target="_blank" rel="noopener noreferrer">{{model1_name}}</a></th>
                  
                      <th><a href="{% url 'qa_system:displacy2_view' %}" target="_blank" rel="noopener noreferrer">{{model2_name}}</a></th>
                  
                      <th><a href="{% url 'qa_system:displacy3_view' %}" target="_blank" rel="noopener noreferrer">{{model3_name}}</a></th>
                  
                    </tr>

                    <tr>
                  
                      <td>
                        <strong>{{answer}}</strong>
                        <br>
                        <strong>Start: </strong>{{start_point}}
                        <br>
                        <strong>End: </strong>{{end_point}}                     
                        <br>   
                        <strong>Score: </strong>{{score}}
                      </td>
                  
                      <td>
                        {% for entity in entities1 %}
                            <ul><p>{{entity}}</p></ul>                          
                        {% endfor %}                          
                      </td>
                  
                      <td>
                        {% for entity in entities2 %}
                            <ul><p>{{entity}}</p></ul>                          
                        {% endfor %}                             
                      </td>
                  
                      <td>
                        {% for entity in entities3 %}
                            <ul><p>{{entity}}</p></ul>                          
                        {% endfor %}                            
                      </td>
                  
                    </tr>                    
                  
                  </table>                


            {% endif %}
        </ul>
        </div>
    </form>
</body>
</html>